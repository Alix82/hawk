<% content_for :head do %>
<style type="text/css">
/* TODO(should): move to stylesheet */
#peinputs th {
  font-weight: bold;
  padding-left: 1em;
}
#peinputs td {
  padding-left: 1em;
}
</style>
<% end %>
<div>
<% form_tag(explorer_path, :method => :get) do %>
<table style="float: left;">
  <tr>
    <th><label for="from_time"><%=h _("Start Time:") %></label></th>
    <td><%= text_field_tag "from_time", @from_time, :size => 14 %></td>
    <th><label for="to_time"><%=h _("End Time:") %></label></th>
    <td><%= text_field_tag "to_time", @to_time, :size => 14 %></td>
    <td><%= submit_tag(_('Display'), { :id => 'display', :name => 'display' }) %></td>
  </tr>
</table>
<div style="float: right;"><%= submit_tag(_('Back'), { :id => 'back', :name => 'back' }) %></div>
<% end %>
</div>
<div style="clear: both;">
<% if @peinputs %>
  <% if @peinputs.empty? %>
<%=h _("No transitions found for the specified time period.") %>
  <% else %>
<table id="peinputs">
  <tr>
    <th><%=h _('Time') %></th>
    <th><%=h _('PE Input') %></th>
    <th><%=h _('Node') %></th>
  </tr>
    <% @peinputs.sort{|a,b|
        if a[:timestamp] != b[:timestamp]
          # reverse chronological if timestamps not equal
          b[:timestamp] <=> a[:timestamp]
        elsif a[:node] != b[:node]
          # ascending node uname if different nodes
          a[:node].natcmp(b[:node], true)
        else
          # descending name if timestamp and node are the same
          b[:basename].natcmp(a[:basename], true)
        end
       }.each do |peinput| %>
  <tr>
    <td><%=h peinput[:timestamp] %></td>
    <td><%= link_to peinput[:basename], pe_get_path(
      :from_time => @from_time, :to_time => @to_time,
      :basename => peinput[:basename], :node => peinput[:node],
      :file => "pe-input") %></td>
    <td><%=h peinput[:node] %></td>
    <td><%= link_to _("Details"), pe_get_path(
      :from_time => @from_time, :to_time => @to_time,
      :basename => peinput[:basename], :node => peinput[:node],
      :file => "info"), :target => "hawk-hist-info" %></td>
    <td><%= link_to _("Graph"), pe_get_path(
      :from_time => @from_time, :to_time => @to_time,
      :basename => peinput[:basename], :node => peinput[:node],
      :file => "graph"), :target => "hawk-hist-info" %>
      <%= link_to "(xml)", pe_get_path(
      :from_time => @from_time, :to_time => @to_time,
      :basename => peinput[:basename], :node => peinput[:node],
      :file => "graph", :format => "xml"), :target => "hawk-hist-info" %></td>
  </tr>
    <% end %>
</table>
  <% end %>
<% end %>
</div>
