.panel.panel-default
  .panel-body
    = form_for [cib, primitive], horizontal: true do |main_form|
      = errors_for primitive

      - if primitive.new_record?
        = main_form.text_field :id, label: _("Resource ID")

        = main_form.select :clazz, :template_clazz_options, { include_blank: true, include_hidden: false }, { label: _("Class") }
        = main_form.select :provider, :template_provider_options, { include_blank: true, include_hidden: false }, { label: _("Provider") }
        = main_form.select :type, :template_type_options, { include_blank: true, include_hidden: false }, { label: _("Type") }
      - else
        = main_form.text_field :id, label: _("Primitive ID"), readonly: true

        = main_form.text_field :clazz, label: _("Class"), readonly: true
        = main_form.text_field :provider, label: _("Provider"), readonly: true
        = main_form.text_field :type, label: _("Type"), readonly: true

      #metalist
        - if primitive.persisted?
          = render partial: "meta", locals: { clazz: primitive.clazz, provider: primitive.provider, type: primitive.type, meta: primitive.meta }

      #paramslist
        - if primitive.persisted?
          = render partial: "params", locals: { clazz: primitive.clazz, provider: primitive.provider, type: primitive.type, params: primitive.params }

      #opslist
        - if primitive.persisted?
          = render partial: "ops", locals: { clazz: primitive.clazz, provider: primitive.provider, type: primitive.type, ops: primitive.ops }

      = main_form.button_group do
        - if primitive.new_record?
          = create_button(main_form, primitive)
        - else
          = apply_button(main_form, primitive)
          = revert_button(main_form, primitive)

        = link_to _("Back"), types_cib_resources_path(cib_id: cib.id), class: "btn btn-default back"
